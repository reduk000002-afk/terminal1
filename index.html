<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>–§—å—é—á–µ—Ä—Å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      overflow-x: hidden;
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0d1117;
      color: #c9d1d9;
      -webkit-text-size-adjust: 100%;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    .header-bar {
      display: flex;
      justify-content: space-between;
      background: #161b22;
      padding: 10px max(20px, env(safe-area-inset-right));
      padding-left: max(20px, env(safe-area-inset-left));
      border-bottom: 1px solid #30363d;
      position: sticky;
      top: 0;
      z-index: 101;
      font-size: 14px;
      align-items: center;
      height: 60px;
      width: 100%;
    }

    .balance-info {
      display: flex;
      gap: 15px;
      align-items: center;
      overflow-x: auto;
      white-space: nowrap;
      max-width: 60%;
    }

    .balance-item {
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }

    .balance-label {
      color: #8b949e;
      font-size: 11px;
      margin-bottom: 2px;
    }

    .balance-value {
      font-weight: bold;
      font-size: 13px;
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      flex-shrink: 0;
    }

    .menu-toggle {
      background: none;
      border: none;
      color: #c9d1d9;
      font-size: 24px;
      cursor: pointer;
      padding: 8px;
      border-radius: 4px;
      transition: background-color 0.2s;
      min-width: 44px;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu-toggle:hover {
      background-color: #21262d;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      right: 0;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 8px;
      min-width: 200px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      display: none;
      z-index: 1000;
      margin-top: 5px;
    }

    .dropdown-menu.active {
      display: block;
      animation: fadeIn 0.2s ease;
    }

    .menu-item {
      padding: 12px 16px;
      cursor: pointer;
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      border-bottom: 1px solid #21262d;
      min-height: 44px;
    }

    .menu-item:last-child {
      border-bottom: none;
    }

    .menu-item:hover {
      background-color: #21262d;
    }

    .menu-item img {
      width: 18px;
      height: 18px;
      filter: brightness(0.8);
    }

    .positive {
      color: #16c784;
    }

    .negative {
      color: #ea3943;
    }

    .login-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #0d1117;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      z-index: 1000;
      padding-top: 80px;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    .login-form {
      background: #161b22;
      padding: 30px;
      border-radius: 10px;
      border: 1px solid #30363d;
      width: calc(100% - 40px);
      max-width: 400px;
      margin-top: 20px;
      margin-left: 20px;
      margin-right: 20px;
    }

    .login-form h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #f0f6fc;
    }

    .login-form input {
      width: 100%;
      padding: 15px;
      margin-bottom: 15px;
      background: #0d1117;
      border: 1px solid #30363d;
      color: white;
      border-radius: 5px;
      font-size: 16px;
      min-height: 50px;
    }

    .login-form button {
      width: 100%;
      padding: 15px;
      background-color: #1f6feb;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      font-weight: 600;
      min-height: 50px;
    }

    .login-error {
      color: #f85149;
      text-align: center;
      margin-top: 10px;
      font-size: 14px;
      display: none;
    }

    .register-link {
      text-align: center;
      margin-top: 15px;
      font-size: 14px;
      color: #8b949e;
    }

    .register-link a {
      color: #1f6feb;
      text-decoration: none;
      font-weight: 500;
    }

    .main-container {
      display: flex;
      min-height: calc(100vh - 60px);
    }

    .market-column {
      width: 280px;
      background: #161b22;
      border-right: 1px solid #30363d;
      padding: 15px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .layout {
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    .sidebar {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      background: #161b22;
      padding: 10px 0;
      border-bottom: 1px solid #30363d;
      position: sticky;
      top: 60px;
      z-index: 100;
    }

    .sidebar-item {
      text-align: center;
      font-size: 12px;
      color: #c9d1d9;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 60px;
      padding: 10px 5px;
      border-radius: 5px;
      transition: background-color 0.2s;
      min-height: 44px;
    }

    .sidebar-item:hover, .sidebar-item.active {
      background-color: #21262d;
    }

    .sidebar-item img {
      width: 20px;
      height: 20px;
      margin-bottom: 5px;
    }

    .page-content {
      flex: 1;
      padding: 20px;
      padding: max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) max(20px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left));
      overflow-y: auto;
      display: none;
      width: 100%;
      box-sizing: border-box;
    }

    .page-content.active {
      display: block;
    }

    .chart-section {
      background: #0d1117;
      position: relative;
      display: flex;
      flex-direction: column;
      height: 50vh;
      border: 1px solid #30363d;
      border-radius: 8px;
      margin-bottom: 20px;
      overflow: hidden;
    }

    .chart-section iframe {
      flex: 1;
      width: 100%;
      border: none;
      min-height: 300px;
      border-radius: 0 0 8px 8px;
    }

    .deal-display {
      background: #0d1117;
      border-top: 1px solid #30363d;
      padding: 15px;
      font-family: monospace;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 30vh;
      overflow-y: auto;
    }

    .deal-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 13px;
    }

    .deal-column {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .terminal-section {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 20px;
      overflow-y: auto;
      transition: transform 0.3s ease, margin-top 0.3s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .selector-container {
      margin-bottom: 15px;
      position: relative;
      width: 100%;
    }

    .selector-button {
      width: 100%;
      padding: 15px;
      background: #0d1117;
      color: white;
      border: 1px solid #30363d;
      border-radius: 8px;
      text-align: left;
      cursor: pointer;
      font-size: 16px;
      min-height: 50px;
    }

    .dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(22, 27, 34, 0.95);
      border: 1px solid #30363d;
      border-radius: 8px;
      max-height: 200px;
      overflow-y: auto;
      display: none;
      z-index: 100;
    }

    .dropdown input {
      width: 100%;
      padding: 15px;
      background: #0d1117;
      color: white;
      border: none;
      border-bottom: 1px solid #30363d;
      font-size: 16px;
      min-height: 50px;
    }

    .dropdown div {
      padding: 15px;
      cursor: pointer;
      font-size: 16px;
      min-height: 44px;
    }

    .dropdown div:hover {
      background: #21262d;
    }

    .terminal-section select,
    .terminal-section input[type="number"] {
      width: 100%;
      padding: 15px;
      background: #0d1117;
      border: 1px solid #30363d;
      color: white;
      border-radius: 5px;
      margin-bottom: 15px;
      font-size: 16px;
      min-height: 50px;
    }

    .btn {
      width: 100%;
      padding: 15px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 15px;
      transition: opacity 0.2s;
      min-height: 50px;
    }

    .btn:hover {
      opacity: 0.9;
    }

    .btn-long {
      background-color: #16c784;
      color: white;
    }

    .btn-short {
      background-color: #ea3943;
      color: white;
    }

    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 20px;
    }

    .checkbox-group label {
      display: flex;
      align-items: center;
      font-size: 16px;
      gap: 10px;
      min-height: 44px;
    }

    .checkbox-group input {
      width: 20px;
      height: 20px;
      min-width: 20px;
    }

    .tp-sl {
      display: none;
      margin-bottom: 15px;
    }

    .tp-sl input {
      width: 100%;
      margin-bottom: 10px;
      padding: 15px;
      min-height: 50px;
      font-size: 16px;
    }

    .flex-space {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .info-line {
      font-size: 15px;
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .leverage-display {
      text-align: center;
      margin: 10px 0 20px;
      font-size: 16px;
    }

    .market-info {
      background: #161b22;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
      border: 1px solid #30363d;
    }

    .market-info div {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 15px;
    }

    .market-info div:last-child {
      margin-bottom: 0;
    }

    .title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .positions-title {
      padding: 15px;
      font-weight: bold;
      border-bottom: 1px solid #30363d;
      background: #161b22;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-height: 44px;
      font-size: 16px;
    }

    .positions-title::after {
      content: "‚ñº";
      font-size: 14px;
      transition: transform 0.3s;
    }

    .positions-title.expanded::after {
      transform: rotate(180deg);
    }

    .deal-block {
      border-bottom: 1px solid #30363d;
      padding: 15px;
      transition: background-color 0.2s;
      font-size: 15px;
    }

    .deal-block:hover {
      background-color: #161b22;
    }

    .section-title {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #8b949e;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .watchlist-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #21262d;
      cursor: pointer;
      transition: background-color 0.2s;
      min-height: 44px;
    }

    .watchlist-item:hover {
      background-color: #21262d;
    }

    .asset-name {
      font-weight: bold;
      font-size: 15px;
    }

    .asset-price {
      font-size: 15px;
    }

    .asset-change {
      font-size: 14px;
      padding: 4px 8px;
      border-radius: 4px;
    }

    .quick-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .quick-btn {
      background: #21262d;
      border: 1px solid #30363d;
      color: #c9d1d9;
      padding: 12px;
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
      font-size: 14px;
      transition: background-color 0.2s;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .quick-btn:hover {
      background: #30363d;
    }

    .portfolio-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 15px;
    }

    .portfolio-bar {
      height: 8px;
      background: #30363d;
      border-radius: 4px;
      margin-top: 8px;
      overflow: hidden;
    }

    .portfolio-fill {
      height: 100%;
      border-radius: 4px;
    }

    .market-stats {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      margin-top: 10px;
      gap: 15px;
    }

    .stat-item {
      text-align: center;
      flex: 1;
    }

    .stat-value {
      font-weight: bold;
      font-size: 16px;
    }

    .stat-label {
      color: #8b949e;
      font-size: 13px;
    }

    .profile-container {
      max-width: 900px;
      margin: 0 auto;
      background: #161b22;
      padding: 30px;
      border: 1px solid #30363d;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      width: 100%;
      box-sizing: border-box;
    }

    .profile-section {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-top: 25px;
      border-top: 1px solid #30363d;
      padding-top: 20px;
    }

    .profile-column {
      flex: 1;
      margin: 10px;
      min-width: 300px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 15px 0;
      padding: 12px 0;
      border-bottom: 1px solid #21262d;
      font-size: 16px;
    }

    .label {
      font-weight: 600;
      color: #8b949e;
    }

    .profile-btn {
      background-color: #238636;
      border: none;
      padding: 12px 20px;
      color: white;
      cursor: pointer;
      border-radius: 6px;
      font-weight: 600;
      transition: background-color 0.2s;
      font-size: 16px;
      min-height: 44px;
    }

    .profile-btn:hover {
      background-color: #2ea043;
    }

    .btn-secondary {
      background-color: #21262d;
      border: 1px solid #30363d;
    }

    .btn-secondary:hover {
      background-color: #30363d;
    }

    .btn-kyc {
      background-color: #1f6feb;
      width: 100%;
      padding: 15px;
      margin-top: 15px;
    }

    .btn-kyc:hover {
      background-color: #2b7ff5;
    }

    .status-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
    }

    .status-verified {
      background-color: rgba(35, 134, 54, 0.2);
      color: #3fb950;
    }

    .status-pending {
      background-color: rgba(187, 128, 9, 0.2);
      color: #d29922;
    }

    .kyc-message {
      background-color: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      font-size: 16px;
      line-height: 1.5;
    }

    .file-upload {
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
    }

    .file-upload label {
      margin-bottom: 10px;
      font-weight: 500;
      color: #8b949e;
      font-size: 16px;
    }

    .file-input {
      background-color: #0d1117;
      color: white;
      border: 1px solid #30363d;
      padding: 15px;
      border-radius: 6px;
      font-size: 16px;
      min-height: 50px;
    }

    .user-id {
      display: flex;
      align-items: center;
      background-color: #0d1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 25px;
      font-size: 16px;
    }

    .user-email {
      display: flex;
      align-items: center;
      background-color: #0d1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 25px;
      font-size: 16px;
    }

    .balance-info-section {
      background: #161b22;
      padding: 25px;
      border: 1px solid #30363d;
      border-radius: 10px;
      margin-bottom: 25px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      width: 100%;
      box-sizing: border-box;
    }

    .wallet-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .wallet-tab {
      background: #21262d;
      padding: 15px 20px;
      border-radius: 8px;
      border: 1px solid #30363d;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.2s ease;
      min-height: 44px;
      flex: 1;
      min-width: 120px;
      justify-content: center;
    }

    .wallet-tab:hover {
      background: #30363d;
    }

    .wallet-tab.active {
      background: #1f6feb;
      border-color: #1f6feb;
      box-shadow: 0 2px 8px rgba(31, 111, 235, 0.3);
    }

    .wallet-content {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .wallet-content.active {
      display: block;
    }

    .qr-code-container {
      text-align: center;
      margin: 20px 0;
      padding: 20px;
      background: #0d1117;
      border-radius: 10px;
      border: 1px solid #30363d;
    }

    .wallet-address {
      background: #161b22;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      word-break: break-all;
      margin: 20px 0;
      text-align: center;
      font-size: 16px;
      border: 1px solid #30363d;
      color: #f0f6fc;
    }

    .wallet-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 25px;
      flex-wrap: wrap;
    }

    .wallet-btn {
      padding: 15px 25px;
      border-radius: 8px;
      cursor: pointer;
      border: none;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.2s ease;
      min-width: 160px;
      min-height: 50px;
    }

    .copy-btn {
      background-color: #1f6feb;
      color: white;
      border: 1px solid #1f6feb;
    }

    .copy-btn:hover {
      background-color: #2b7ff5;
      box-shadow: 0 2px 8px rgba(31, 111, 235, 0.3);
    }

    .copy-btn.copied {
      background-color: #238636;
      border-color: #238636;
    }

    .history-section {
      background: #161b22;
      padding: 25px;
      border: 1px solid #30363d;
      border-radius: 10px;
      margin-top: 25px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      width: 100%;
      box-sizing: border-box;
    }

    .history-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 16px;
    }

    .history-table th {
      text-align: left;
      padding: 15px;
      border-bottom: 1px solid #30363d;
      color: #58a6ff;
      font-weight: 600;
      font-size: 15px;
    }

    .history-table td {
      padding: 15px;
      border-bottom: 1px solid #21262d;
      color: #f0f6fc;
    }

    .empty-history {
      text-align: center;
      padding: 40px 20px;
      color: #8b949e;
      font-size: 16px;
    }

    .network-info {
      color: #8b949e;
      font-size: 15px;
      margin-top: 10px;
      text-align: center;
    }

    .withdraw-alert {
      color: #f85149;
      background: rgba(248, 81, 73, 0.1);
      padding: 20px;
      border-radius: 8px;
      font-size: 16px;
      margin-bottom: 25px;
      border: 1px solid rgba(248, 81, 73, 0.3);
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .withdraw-form {
      background: #161b22;
      padding: 25px;
      border-radius: 10px;
      border: 1px solid #30363d;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      margin-bottom: 30px;
      width: 100%;
      box-sizing: border-box;
    }

    .withdraw-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .withdraw-tab {
      padding: 15px 25px;
      background: #21262d;
      border: 1px solid #30363d;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.2s ease;
      min-height: 44px;
      flex: 1;
      min-width: 160px;
      text-align: center;
    }

    .withdraw-tab:hover {
      background: #30363d;
    }

    .withdraw-tab.active {
      background: #1f6feb;
      color: white;
      border-color: #1f6feb;
      box-shadow: 0 2px 8px rgba(31, 111, 235, 0.3);
    }

    .form-section {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .form-section.active {
      display: block;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 25px;
    }

    .form-group label {
      margin-bottom: 10px;
      font-weight: 500;
      color: #8b949e;
      font-size: 16px;
    }

    .form-group input {
      padding: 15px;
      border: 1px solid #30363d;
      border-radius: 8px;
      background: #0d1117;
      color: #f0f6fc;
      font-size: 16px;
      transition: border-color 0.2s;
      min-height: 50px;
    }

    .submit-btn {
      background: #1f6feb;
      color: white;
      padding: 18px 25px;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      width: 100%;
      margin-top: 20px;
      min-height: 55px;
    }

    .balance-display {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 25px;
      margin-bottom: 25px;
      width: 100%;
      box-sizing: border-box;
    }

    .balance-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid #21262d;
      font-size: 16px;
    }

    .balance-row:last-child {
      border-bottom: none;
    }

    .balance-label {
      color: #8b949e;
      font-size: 16px;
    }

    .balance-amount {
      font-size: 18px;
      font-weight: 600;
      color: #f0f6fc;
    }

    .total-balance {
      background: linear-gradient(135deg, #1f6feb, #2b7ff5);
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 25px;
      text-align: center;
      width: 100%;
      box-sizing: border-box;
    }

    .total-balance-label {
      color: rgba(255, 255, 255, 0.9);
      font-size: 18px;
      margin-bottom: 15px;
    }

    .total-balance-amount {
      font-size: 32px;
      font-weight: 700;
      color: white;
    }

    .balance-currency {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.8);
      margin-left: 10px;
    }

    .available-balance {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
      width: 100%;
      box-sizing: border-box;
    }

    .available-balance-label {
      color: #8b949e;
      font-size: 16px;
      margin-bottom: 10px;
    }

    .available-balance-amount {
      font-size: 22px;
      font-weight: 600;
      color: #f0f6fc;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      z-index: 10000;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    .modal-overlay.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal {
      background: #161b22;
      border-radius: 16px;
      border: 1px solid #30363d;
      max-width: 500px;
      width: calc(100% - 40px);
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      animation: modalAppear 0.3s ease;
      margin: 20px;
    }

    .modal-header {
      padding: 25px;
      border-bottom: 1px solid #30363d;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h3 {
      color: #f0f6fc;
      font-size: 20px;
      font-weight: 600;
    }

    .modal-close {
      background: none;
      border: none;
      color: #8b949e;
      font-size: 28px;
      cursor: pointer;
      padding: 0;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      transition: background-color 0.2s;
    }

    .modal-body {
      padding: 25px;
    }

    .modal-message {
      color: #c9d1d9;
      line-height: 1.6;
      margin-bottom: 20px;
      font-size: 16px;
    }

    .commission-warning {
      background: rgba(248, 81, 73, 0.1);
      border: 1px solid rgba(248, 81, 73, 0.3);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }

    .commission-list {
      list-style: none;
      margin: 20px 0;
      padding: 0;
    }

    .commission-list li {
      padding: 8px 0;
      color: #8b949e;
      font-size: 15px;
    }

    .commission-total {
      font-weight: 600;
      color: #f85149 !important;
      font-size: 17px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #30363d;
    }

    .modal-footer {
      padding: 25px;
      border-top: 1px solid #30363d;
      display: flex;
      gap: 15px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .modal-btn {
      padding: 15px 25px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      min-height: 50px;
      flex: 1;
      min-width: 120px;
    }

    .modal-btn-cancel {
      background: #21262d;
      color: #c9d1d9;
      border: 1px solid #30363d;
    }

    .modal-btn-confirm {
      background: #1f6feb;
      color: white;
    }

    .checkbox-container {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      margin: 25px 0;
      padding: 20px;
      background: rgba(248, 81, 73, 0.05);
      border-radius: 10px;
      border: 1px solid rgba(248, 81, 73, 0.2);
    }

    .support-message {
      text-align: center;
      padding: 25px 0;
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #f85149;
      color: white;
      padding: 20px 30px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 500;
      z-index: 9999;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      display: none;
      animation: slideIn 0.3s ease;
      max-width: calc(100% - 40px);
    }

    .success-checkmark {
      text-align: center;
      margin: 25px 0;
    }

    .check-icon {
      width: 80px;
      height: 80px;
      position: relative;
      border-radius: 50%;
      box-sizing: content-box;
      border: 4px solid #16c784;
      margin: 0 auto;
    }

    .check-icon::before {
      top: 3px;
      left: -2px;
      width: 30px;
      transform-origin: 100% 50%;
      border-radius: 100px 0 0 100px;
    }

    .check-icon::after {
      top: 0;
      left: 30px;
      width: 60px;
      transform-origin: 0 50%;
      border-radius: 0 100px 100px 0;
      animation: rotate-circle 4.25s ease-in;
    }

    .check-icon::before, .check-icon::after {
      content: '';
      height: 100px;
      position: absolute;
      background: #161b22;
      transform: rotate(-45deg);
    }

    .icon-line {
      height: 5px;
      background-color: #16c784;
      display: block;
      border-radius: 2px;
      position: absolute;
      z-index: 10;
    }

    .icon-line.line-tip {
      top: 46px;
      left: 14px;
      width: 25px;
      transform: rotate(45deg);
      animation: icon-line-tip 0.75s;
    }

    .icon-line.line-long {
      top: 38px;
      right: 8px;
      width: 47px;
      transform: rotate(-45deg);
      animation: icon-line-long 0.75s;
    }

    .icon-circle {
      top: -4px;
      left: -4px;
      z-index: 10;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      position: absolute;
      box-sizing: content-box;
      border: 4px solid rgba(22, 199, 132, 0.5);
    }

    .icon-fix {
      top: 8px;
      width: 5px;
      left: 26px;
      z-index: 1;
      height: 85px;
      position: absolute;
      transform: rotate(-45deg);
      background-color: #161b22;
    }

    .normal-withdraw-info {
      background: rgba(22, 199, 132, 0.1);
      border: 1px solid rgba(22, 199, 132, 0.3);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }

    .withdraw-details {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      margin: 12px 0;
      font-size: 16px;
    }

    .fee-amount {
      color: #8b949e;
    }

    .receive-amount {
      color: #16c784;
      font-weight: bold;
    }

    .countdown-timer {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      color: #1f6feb;
      margin: 20px 0;
    }

    @keyframes rotate-circle {
      0% { transform: rotate(-45deg); }
      5% { transform: rotate(-45deg); }
      12% { transform: rotate(-405deg); }
      100% { transform: rotate(-405deg); }
    }

    @keyframes icon-line-tip {
      0% { width: 0; left: 1px; top: 19px; }
      54% { width: 0; left: 1px; top: 19px; }
      70% { width: 50px; left: -8px; top: 37px; }
      84% { width: 17px; left: 21px; top: 48px; }
      100% { width: 25px; left: 14px; top: 45px; }
    }

    @keyframes icon-line-long {
      0% { width: 0; right: 46px; top: 54px; }
      65% { width: 0; right: 46px; top: 54px; }
      84% { width: 55px; right: 0px; top: 35px; }
      100% { width: 47px; right: 8px; top: 38px; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes modalAppear {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .mobile-bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #161b22;
      border-top: 1px solid #30363d;
      display: flex;
      justify-content: space-around;
      padding: 12px 0 calc(12px + env(safe-area-inset-bottom));
      z-index: 1000;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
    }

    .mobile-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #8b949e;
      font-size: 12px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s;
      min-width: 60px;
      flex: 1;
      max-width: 90px;
      min-height: 44px;
    }

    .mobile-nav-item.active {
      color: #1f6feb;
      background: rgba(31, 111, 235, 0.1);
    }

    .mobile-nav-item img {
      width: 24px;
      height: 24px;
      margin-bottom: 4px;
      filter: brightness(0.8);
    }

    .mobile-nav-item.active img {
      filter: brightness(1);
    }

    .request-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 25px;
    }

    .support-link-btn {
      background: #1f6feb;
      color: white;
      padding: 18px;
      border-radius: 8px;
      text-decoration: none;
      text-align: center;
      font-weight: 500;
      transition: background-color 0.2s;
      font-size: 16px;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .support-link-btn:hover {
      background: #2b7ff5;
    }

    .cancel-withdraw-btn {
      background: #21262d;
      color: #c9d1d9;
      padding: 18px;
      border-radius: 8px;
      border: 1px solid #30363d;
      text-align: center;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s;
      font-size: 16px;
      min-height: 50px;
    }

    .cancel-withdraw-btn:hover {
      background: #30363d;
    }

    @media (min-width: 768px) {
      .layout {
        flex-direction: row;
        height: calc(100vh - 60px);
      }
      
      .sidebar {
        flex-direction: column;
        justify-content: flex-start;
        width: 80px;
        height: calc(100vh - 60px);
        padding-top: 20px;
        gap: 30px;
        border-right: 1px solid #30363d;
        border-bottom: none;
        top: 60px;
      }
      
      .market-column {
        display: flex;
        width: 280px;
        height: calc(100vh - 60px);
      }
      
      .deal-row {
        flex-direction: row;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 20px;
      }
      
      .deal-column {
        min-width: 180px;
      }
      
      .flex-space {
        flex-direction: row;
        gap: 4%;
        flex-wrap: wrap;
      }

      .trade-layout {
        display: flex;
        gap: 20px;
        height: 100%;
      }

      .trade-main {
        flex: 2;
        display: flex;
        flex-direction: column;
      }

      .trade-terminal {
        width: 350px;
        height: 100%;
      }

      .positions-container {
        display: block;
        max-height: 300px;
        overflow-y: auto;
        background: #0d1117;
        border: 1px solid #30363d;
        border-radius: 8px;
        margin-top: 20px;
      }

      .mobile-positions-toggle {
        display: none;
      }

      .desktop-positions {
        display: block;
      }

      .mobile-bottom-nav {
        display: none;
      }
    }

    @media (max-width: 767px) {
      .main-container {
        flex-direction: column;
      }

      .market-column {
        display: none;
      }

      .layout {
        flex-direction: column;
        height: auto;
      }

      .header-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        padding: 10px max(15px, env(safe-area-inset-right));
        padding-left: max(15px, env(safe-area-inset-left));
      }

      .sidebar {
        display: none;
      }

      .page-content {
        margin-top: 60px;
        margin-bottom: calc(80px + env(safe-area-inset-bottom));
        padding: max(15px, env(safe-area-inset-left));
        padding-bottom: 20px;
        width: 100%;
        box-sizing: border-box;
      }

      .chart-section {
        height: 35vh;
        min-height: 250px;
        margin-bottom: 15px;
      }

      .chart-section iframe {
        min-height: 200px;
      }

      .positions-container {
        display: none;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
      }

      .positions-container.expanded {
        display: block;
        max-height: 400px;
        overflow-y: auto;
        animation: fadeIn 0.3s ease;
      }

      .mobile-positions-toggle {
        display: block;
        margin-top: 20px;
      }

      .trade-layout {
        display: flex;
        flex-direction: column;
        gap: 0;
        padding-bottom: 20px;
        width: 100%;
        box-sizing: border-box;
      }

      .trade-main {
        order: 1;
        width: 100%;
      }

      .trade-terminal {
        order: 2;
        margin-top: 20px;
        transition: transform 0.3s ease, margin-top 0.3s ease;
        width: 100%;
      }

      .trade-terminal.shifted {
        transform: translateY(120px);
        margin-top: 140px;
      }

      .desktop-positions {
        display: none;
      }

      .mobile-bottom-nav {
        display: flex;
      }

      .balance-warning {
        display: none;
      }

      .withdraw-alert {
        display: none;
      }

      .login-container {
        padding-top: 60px;
        justify-content: flex-start;
        padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      }

      .login-form {
        margin-top: 60px;
        margin-left: max(20px, env(safe-area-inset-left));
        margin-right: max(20px, env(safe-area-inset-right));
      }

      .wallet-tabs {
        gap: 8px;
      }

      .wallet-tab {
        min-width: calc(50% - 4px);
        padding: 12px 8px;
        font-size: 14px;
      }

      .withdraw-tabs {
        gap: 8px;
      }

      .withdraw-tab {
        min-width: calc(50% - 4px);
        padding: 12px 8px;
        font-size: 14px;
      }

      .modal-btn {
        min-width: calc(50% - 8px);
      }
    }

    @media (max-width: 360px) {
      .trade-terminal.shifted {
        transform: translateY(100px);
        margin-top: 120px;
      }
      
      .mobile-nav-item {
        padding: 6px;
        font-size: 11px;
      }
      
      .mobile-nav-item img {
        width: 22px;
        height: 22px;
      }

      .wallet-tab {
        min-width: 100%;
      }

      .withdraw-tab {
        min-width: 100%;
      }

      .modal-btn {
        min-width: 100%;
      }
    }
  </style>
</head>
<body>
<!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
<div id="loginContainer" class="login-container">
  <div class="login-form">
    <h2>–í—Ö–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª</h2>
    <input type="text" id="loginEmail" placeholder="–õ–æ–≥–∏–Ω" required>
    <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
    <button onclick="checkLogin()">–í–æ–π—Ç–∏</button>
    <div id="loginError" class="login-error">–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å</div>
    <div class="register-link">
      –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="https://www.galardro.org/" target="_blank">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
    </div>
  </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Å–∫—Ä—ã—Ç –¥–æ –≤—Ö–æ–¥–∞) -->
<div id="mainContent" style="display: none;">
  <!-- –•–µ–¥–µ—Ä —Å –±–∞–ª–∞–Ω—Å–æ–º -->
  <div class="header-bar">
    <div class="balance-info">
      <div class="balance-item">
        <span class="balance-label">–ë–∞–ª–∞–Ω—Å:</span>
        <span class="balance-value" id="balanceValue">0.00 USDT</span>
      </div>
      <div class="balance-item">
        <span class="balance-label"></span>
        <span class="balance-value"> </span>
      </div>
      <div class="balance-item">
        <span class="balance-label"></span>
        <span class="balance-value positive" id="pnlValue"></span>
      </div>
      <button id="refreshBalanceBtn" style="background: #1f6feb; color: white; border: none; border-radius: 6px; padding: 6px 10px; cursor: pointer; margin-left: 10px; font-size: 14px; min-width: 44px; min-height: 30px;" title="–û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å">üîÑ</button>
    </div>
    <div class="user-menu">
      <span id="userLevel">–£—Ä–æ–≤–µ–Ω—å: 1</span>
      <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
      <div class="dropdown-menu" id="dropdownMenu">
        <div class="menu-item" onclick="showPage('trade')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/home.png" alt="" />
          –¢–æ—Ä–≥–æ–≤–ª—è
        </div>
        <div class="menu-item" onclick="showPage('profile')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/user-male-circle.png" alt="" />
          –ü—Ä–æ—Ñ–∏–ª—å
        </div>
        <div class="menu-item" onclick="showPage('deposit')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/money-transfer.png" alt="" />
          –î–µ–ø–æ–∑–∏—Ç
        </div>
        <div class="menu-item" onclick="showPage('withdraw')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/export.png" alt="" />
          –í—ã–≤–æ–¥
        </div>
        <div class="menu-item">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/activity-history.png" alt="" />
          –ò—Å—Ç–æ—Ä–∏—è
        </div>
      </div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="main-container">
    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å —Ä—ã–Ω–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ -->
    <div class="market-column">
      <!-- –°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ -->
      <div class="watchlist-section">
        <div class="section-title">
          <span>–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤—ã</span>
        </div>
        <div id="watchlist">
          <!-- –ê–∫—Ç–∏–≤—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
      </div>

      <!-- –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ -->
      <div class="quick-buttons-section">
        <div class="section-title">–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</div>
        <div class="quick-buttons">
          <div class="quick-btn" onclick="selectAsset('BTC')">BTC/USDT</div>
          <div class="quick-btn" onclick="selectAsset('ETH')">ETH/USDT</div>
          <div class="quick-btn" onclick="selectAsset('AAPL')">AAPL</div>
          <div class="quick-btn" onclick="selectAsset('TSLA')">TSLA</div>
          <div class="quick-btn" onclick="selectAsset('NVDA')">NVDA</div>
          <div class="quick-btn" onclick="selectAsset('MSFT')">MSFT</div>
        </div>
      </div>

      <!-- –û–±–∑–æ—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è -->
      <div class="portfolio-section">
        <div class="section-title">–û–±–∑–æ—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è</div>
        <div class="portfolio-item">
          <span>–ê–∫—Ü–∏–∏</span>
          <span>65%</span>
        </div>
        <div class="portfolio-bar">
          <div class="portfolio-fill" style="width: 65%; background: #1f6feb;"></div>
        </div>
        <div class="portfolio-item">
          <span>–ö—Ä–∏–ø—Ç–æ</span>
          <span>25%</span>
        </div>
        <div class="portfolio-bar">
          <div class="portfolio-fill" style="width: 25%; background: #16c784;"></div>
        </div>
        <div class="portfolio-item">
          <span>–§—å—é—á–µ—Ä—Å—ã</span>
          <span>10%</span>
        </div>
        <div class="portfolio-bar">
          <div class="portfolio-fill" style="width: 10%; background: #ea3943;"></div>
        </div>
      </div>

      <!-- –†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
      <div class="market-data-section">
        <div class="section-title">–†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
        <div class="market-stats">
          <div class="stat-item">
            <div class="stat-value" id="btcDominance">42.8%</div>
            <div class="stat-label">–î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ BTC</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="fearGreed">72</div>
            <div class="stat-label">–ò–Ω–¥–µ–∫—Å —Å—Ç—Ä–∞—Ö–∞</div>
          </div>
        </div>
        <div class="market-stats">
          <div class="stat-item">
            <div class="stat-value" id="totalMarketCap">2.11T</div>
            <div class="stat-label">–ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="volume24h">78.38B</div>
            <div class="stat-label">–û–±—ä–µ–º 24—á</div>
          </div>
        </div>
      </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π layout —Å –º–µ–Ω—é –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º -->
    <div class="layout">
      <!-- sidebar -->
      <div class="sidebar">
        <div class="sidebar-item active" onclick="showPage('trade')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/home.png" alt="" />
          <div>–¢–æ—Ä–≥–æ–≤–ª—è</div>
        </div>
        <div class="sidebar-item" onclick="showPage('profile')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/user-male-circle.png" alt="" />
          <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
        <div class="sidebar-item" onclick="showPage('deposit')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/money-transfer.png" alt="" />
          <div>–î–µ–ø–æ–∑–∏—Ç</div>
        </div>
        <div class="sidebar-item" onclick="showPage('withdraw')">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/export.png" alt="" />
          <div>–í—ã–≤–æ–¥</div>
        </div>
        <div class="sidebar-item">
          <img src="https://img.icons8.com/ios-filled/24/ffffff/activity-history.png" alt="" />
          <div>–ò—Å—Ç–æ—Ä–∏—è</div>
        </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü -->
      
      <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¢–æ—Ä–≥–æ–≤–ª—è -->
      <div id="trade-page" class="page-content active">
        <div class="trade-layout">
          <div class="trade-main">
            <div class="chart-section">
              <div style="padding: 15px; background: #161b22; border-bottom: 1px solid #30363d; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                <div style="font-weight: bold; font-size: 16px;" id="companyTitle">Apple Inc</div>
                <div style="font-size: 14px; color: #8b949e; margin-top: 5px;" id="currentTime">02:04:37 1024.83 | 02:04:33 ‚Äì 03:04 (+0.01%)</div>
              </div>
              <iframe id="chartFrame" src="https://www.tradingview.com/widgetembed/?symbol=AAPL&interval=1&theme=dark"></iframe>

              <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–π -->
              <div class="mobile-positions-toggle">
                <div class="positions-title" onclick="togglePositions()">
                  –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∑–∏—Ü–∏–π
                </div>
                <div id="positionsContainer" class="positions-container">
                  <!-- –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
              </div>

              <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –≤ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏ -->
              <div class="desktop-positions">
                <div class="positions-title">
                  –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∑–∏—Ü–∏–π
                </div>
                <div id="desktopPositionsContainer" class="positions-container">
                  <!-- –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
              </div>
            </div>
          </div>
          
          <div class="trade-terminal" id="tradeTerminal">
            <div class="terminal-section">
              <div class="title">–§—å—é—á–µ—Ä—Å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª</div>
              
              <!-- –°–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ -->
              <div class="selector-container">
                <button class="selector-button" onclick="toggleDropdown()">–¢–µ–∫—É—â–∞—è –∫–æ–º–ø–∞–Ω–∏—è: <span id="selectedCompany">AAPL</span> ‚ñº</button>
                <div id="dropdown" class="dropdown">
                  <input type="text" placeholder="–ü–æ–∏—Å–∫..." oninput="filterCompanies(this.value)" />
                  <div id="companyList"></div>
                </div>
              </div>
              
              <div class="market-info">
                <div>
                  <span>–¶–µ–Ω–∞:</span>
                  <span id="currentPrice">${(Math.random() * 100 + 50).toFixed(2)} USD</span>
                </div>
                <div>
                  <span>24h –û–±—ä–µ–º:</span>
                  <span id="dailyVolume">${(Math.random() * 5000 + 1000).toFixed(0)} BTC</span>
                </div>
                <div>
                  <span>24h –ò–∑–º–µ–Ω–µ–Ω–∏–µ:</span>
                  <span id="dailyChange" style="color: ${Math.random() > 0.5 ? '#16c784' : '#ea3943'}">
                    ${(Math.random() * 10 - 5).toFixed(2)}%
                  </span>
                </div>
              </div>
              <select>
                <option>–õ–∏–º–∏—Ç–Ω—ã–π</option>
                <option selected>–†—ã–Ω–æ—á–Ω—ã–π</option>
                <option>–¢—Ä–∏–≥–≥–µ—Ä</option>
              </select>
              <div class="info-line">–†–µ–∂–∏–º –∞–∫—Ç–∏–≤–æ–≤: –û–¥–∏–Ω –∞–∫—Ç–∏–≤</div>
              <div class="info-line">–î–æ—Å—Ç.: <span id="availableBalanceTrade">0.00</span> USDT</div>
              <input type="number" placeholder="–°—Ç–æ–∏–º–æ—Å—Ç—å" />
              <select>
                <option selected>USDT</option>
                <option>BTC</option>
              </select>
              <label for="leverage">–ö—Ä–µ–¥–∏—Ç–Ω–æ–µ –ø–ª–µ—á–æ:</label>
              <input type="range" id="leverage" min="1" max="100" value="20" oninput="updateLeverage(this.value)">
              <div class="leverage-display" id="leverage-value">20x</div>
              <div class="checkbox-group">
                <label><input type="checkbox" onchange="toggleTPSL(this, 'tp-sl-long')"> –õ–æ–Ω–≥ —Ç-–ø/—Å-–ª</label>
                <label><input type="checkbox" onchange="toggleTPSL(this, 'tp-sl-short')"> –®–æ—Ä—Ç —Ç-–ø/—Å-–ª</label>
              </div>
              <div id="tp-sl-long" class="tp-sl">
                <input type="number" placeholder="–õ–æ–Ω–≥ Take Profit (USDT)">
                <input type="number" placeholder="–õ–æ–Ω–≥ Stop Loss (USDT)">
              </div>
              <div id="tp-sl-short" class="tp-sl">
                <input type="number" placeholder="–®–æ—Ä—Ç Take Profit (USDT)">
                <input type="number" placeholder="–®–æ—Ä—Ç Stop Loss (USDT)">
              </div>
              <div class="info-line">–û–∂–∏–¥. —Ü–µ–Ω–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ (–ª–æ–Ω–≥): ‚Äî</div>
              <div class="info-line">–û–∂–∏–¥. —Ü–µ–Ω–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ (—à–æ—Ä—Ç): ‚Äî</div>
              <div class="flex-space">
                <button class="btn btn-long" onclick="openPosition('–õ–æ–Ω–≥')">–û—Ç–∫—Ä—ã—Ç—å –ª–æ–Ω–≥</button>
                <button class="btn btn-short" onclick="openPosition('–®–æ—Ä—Ç')">–û—Ç–∫—Ä—ã—Ç—å —à–æ—Ä—Ç</button>
              </div>
              <div class="info-line">–£—Ä–æ–≤–µ–Ω—å –∫–æ–º–∏—Å—Å–∏–∏</div>
            </div>
          </div>
        </div>
      </div>

      <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ü—Ä–æ—Ñ–∏–ª—å -->
      <div id="profile-page" class="page-content">
        <div class="profile-container">
          <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
          
          <div class="user-id">
            <span class="label">ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</span>
            <span class="value">J58syuYkou97dkdjk9yt</span>
          </div>
          
          <div class="user-email">
            <span class="label">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:</span>
            <span class="value" id="userEmail">user@example.com</span>
          </div>
          
          <div class="profile-section">
            <div class="profile-column">
              <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
              
              <div class="info-row">
                <span class="label">–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</span>
                <button class="profile-btn btn-secondary" onclick="enable2FA()">–í–∫–ª—é—á–∏—Ç—å</button>
              </div>
              
              <div class="kyc-message">
                <p><strong>–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è KYC</strong></p>
                <p>–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–π—Ç–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –ª–∏—á–Ω–æ—Å—Ç–∏.</p>
                <p>–ü–æ—Å–ª–µ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–π–º–µ—Ç –¥–æ 48 —á–∞—Å–æ–≤.</p>
              </div>
              
              <button class="profile-btn btn-kyc" onclick="showKycMessage()">–ü—Ä–æ–π—Ç–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é KYC</button>
              
              <div class="info-row">
                <span class="label">–°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:</span>
                <span class="status-badge status-pending">–ß–∞—Å—Ç–∏—á–Ω–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω</span>
              </div>
            </div>
            
            <div class="profile-column">
              <h3>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
              <p style="color: #8b949e; margin-bottom: 15px; font-size: 14px;">–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
              
              <div class="info-row">
                <span class="label">–ò–º—è:</span>
                <span class="value">‚Äî</span>
              </div>
              
              <div class="info-row">
                <span class="label">–§–∞–º–∏–ª–∏—è:</span>
                <span class="value">‚Äî</span>
              </div>
              
              <div class="info-row">
                <span class="label">–°—Ç—Ä–∞–Ω–∞:</span>
                <span class="value">‚Äî</span>
              </div>
              
              <div class="info-row">
                <span class="label">–ì–æ—Ä–æ–¥:</span>
                <span class="value">‚Äî</span>
              </div>
              
              <div class="info-row">
                <span class="label">–ê–¥—Ä–µ—Å:</span>
                <span class="value">‚Äî</span>
              </div>
              
              <div class="info-row">
                <span class="label">–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å:</span>
                <span class="value">‚Äî</span>
              </div>
              
              <div class="info-row">
                <span class="label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</span>
                <span class="value">‚Äî</span>
              </div>
            </div>
          </div>

          <div class="profile-section">
            <div class="profile-column">
              <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏</h3>
              
              <div class="file-upload">
                <label for="passport-front">–ü–∞—Å–ø–æ—Ä—Ç (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)</label>
                <input type="file" id="passport-front" class="file-input" />
              </div>
              
              <div class="file-upload">
                <label for="passport-selfie">–°–µ–ª—Ñ–∏ —Å –ø–∞—Å–ø–æ—Ä—Ç–æ–º</label>
                <input type="file" id="passport-selfie" class="file-input" />
              </div>
              
              <div class="file-upload">
                <label for="address-proof">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞</label>
                <input type="file" id="address-proof" class="file-input" />
              </div>
            </div>
            
            <div class="profile-column">
              <h3>–ü–ª–∞—Ç—ë–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
              
              <div class="file-upload">
                <label for="dod">DoD –¥–æ–∫—É–º–µ–Ω—Ç</label>
                <input type="file" id="dod" class="file-input" />
              </div>
              
              <div class="file-upload">
                <label for="utility-bill">Utility bill</label>
                <input type="file" id="utility-bill" class="file-input" />
              </div>
              
              <div class="file-upload">
                <label for="wire-transfer">Wire transfer swift</label>
                <input type="file" id="wire-transfer" class="file-input" />
              </div>
              
              <div class="file-upload">
                <label for="card-front">–õ–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –∫–∞—Ä—Ç—ã</label>
                <input type="file" id="card-front" class="file-input" />
              </div>
              
              <div class="file-upload">
                <label for="card-back">–û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –∫–∞—Ä—Ç—ã</label>
                <input type="file" id="card-back" class="file-input" />
              </div>
              
              <div class="file-upload">
                <label for="payment-proof">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</label>
                <input type="file" id="payment-proof" class="file-input" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –î–µ–ø–æ–∑–∏—Ç -->
      <div id="deposit-page" class="page-content">
        <h1>–ë–∞–ª–∞–Ω—Å</h1>
        
        <!-- –ì–ª–∞–≤–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–∞–∫ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –±–∏—Ä–∂–µ -->
        <div class="total-balance">
          <div class="total-balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
          <div class="total-balance-amount" id="depositTotalBalance">0.00<span class="balance-currency">USDT</span></div>
        </div>

        <div class="available-balance">
          <div class="available-balance-label">–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏</div>
          <div class="available-balance-amount" id="availableBalance">0.00 USDT</div>
        </div>
        
        <div class="balance-info-section">
          <div class="wallet-tabs">
            <div class="wallet-tab" data-wallet="btc">BTC</div>
            <div class="wallet-tab" data-wallet="eth">ETH</div>
            <div class="wallet-tab active" data-wallet="usdt-erc20">USDT ERC20</div>
            <div class="wallet-tab" data-wallet="usdt-trc20">USDT TRC20</div>
          </div>
          
          <!-- –ö–æ—à–µ–ª—å–∫–∏ -->
          <div id="btc-wallet" class="wallet-content">
            <div class="qr-code-container">
              <div class="qr-code">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=3FZbgi29pgTQ3KJJeuZPbQYJBJfZ4qJwYt" alt="BTC QR Code">
              </div>
              <div class="wallet-address">3FZbgi29pgTQ3KJJeuZPbQYJBJfZ4qJwYt</div>
              <div class="network-info">Bitcoin Network</div>
              <div class="wallet-buttons">
                <button class="wallet-btn copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
              </div>
            </div>
          </div>
          
          <div id="eth-wallet" class="wallet-content">
            <div class="qr-code-container">
              <div class="qr-code">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=0x71C7656EC7ab88b098defB751B7401B5f6d8976F" alt="ETH QR Code">
              </div>
              <div class="wallet-address">0x71C7656EC7ab88b098defB751B7401B5f6d8976F</div>
              <div class="network-info">Ethereum Network (ERC20)</div>
              <div class="wallet-buttons">
                <button class="wallet-btn copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
              </div>
            </div>
          </div>
          
          <div id="usdt-erc20-wallet" class="wallet-content active">
            <div class="qr-code-container">
              <div class="qr-code">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=TRWAUKg2yw1QRFh9TTsGvSJudyHACHzyJ3" alt="USDT ERC20 QR Code">
              </div>
              <div class="wallet-address">TRWAUKg2yw1QRFh9TTsGvSJudyHACHzyJ3</div>
              <div class="network-info">Ethereum Network (ERC20)</div>
              <div class="wallet-buttons">
                <button class="wallet-btn copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
              </div>
            </div>
          </div>
          
          <div id="usdt-trc20-wallet" class="wallet-content">
            <div class="qr-code-container">
              <div class="qr-code">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=TRWAUKg2yw1QRFh9TTsGvSJudyHACHzyJ3" alt="USDT TRC20 QR Code">
              </div>
              <div class="wallet-address">TRWAUKg2yw1QRFh9TTsGvSJudyHACHzyJ3</div>
              <div class="network-info">Tron Network (TRC20)</div>
              <div class="wallet-buttons">
                <button class="wallet-btn copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
              </div>
            </div>
          </div>
        </div>

        <div class="history-section">
          <h2>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h2>
          <table class="history-table">
            <thead>
              <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–°—É–º–º–∞</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–°—á—ë—Ç</th>
                <th>–¢–∏–ø</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
              </tr>
            </thead>
            <tbody>
              <tr class="empty-history">
                <td colspan="6">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –í—ã–≤–æ–¥ -->
      <div id="withdraw-page" class="page-content">
        <h1>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h1>

        <!-- –ì–ª–∞–≤–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–∞–∫ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –±–∏—Ä–∂–µ -->
        <div class="total-balance">
          <div class="total-balance-label">–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–≤–æ–¥–∞</div>
          <div class="total-balance-amount" id="withdrawTotalBalance">0.00<span class="balance-currency">USDT</span></div>
        </div>

        <div class="balance-display">
          <div class="balance-row">
            <span class="balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</span>
            <span class="balance-amount" id="withdrawBalanceTotal">0.00 USDT</span>
          </div>
          <div class="balance-row">
            <span class="balance-label">–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–≤–æ–¥–∞</span>
            <span class="balance-amount" id="withdrawBalanceAvailable">0.00 USDT</span>
          </div>
          <div class="balance-row">
            <span class="balance-label">–í –æ—Ä–¥–µ—Ä–∞—Ö</span>
            <span class="balance-amount">0.00 USDT</span>
          </div>
        </div>

        <div class="withdraw-form">
          <div class="withdraw-tabs">
            <div class="withdraw-tab active" onclick="switchWithdrawTab('bank')">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</div>
            <div class="withdraw-tab" onclick="switchWithdrawTab('crypto')">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</div>
          </div>

          <div id="bank" class="form-section active">
            <div class="form-group">
              <label for="card-number">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã</label>
              <input type="text" id="card-number" placeholder="0000 0000 0000 0000" />
            </div>
            <div class="form-group">
              <label for="card-holder">–ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫–∞—Ä—Ç—ã</label>
              <input type="text" id="card-holder" placeholder="IVAN IVANOV" />
            </div>
            <div class="form-group">
              <label for="withdraw-amount-bank">–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞ (USDT)</label>
              <input type="text" id="withdraw-amount-bank" placeholder="0.00" />
            </div>
            <button class="submit-btn" onclick="showVipModal()">–í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞</button>
          </div>

          <div id="crypto" class="form-section">
            <div class="form-group">
              <label for="wallet-address">–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞</label>
              <input type="text" id="wallet-address" placeholder="0x..." />
            </div>
            <div class="form-group">
              <label for="withdraw-amount-crypto">–°—É–º–º–∞ –≤ USDT</label>
              <input type="text" id="withdraw-amount-crypto" placeholder="0.00" />
            </div>
            <button class="submit-btn" onclick="showCommissionModal()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É</button>
          </div>
        </div>

        <div class="history-section">
          <h2>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h2>
          <table class="history-table">
            <thead>
              <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–í–∞–ª—é—Ç–∞</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–°—É–º–º–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
              </tr>
            </thead>
            <tbody>
              <tr class="empty-history">
                <td colspan="5">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤–Ω–∏–∑—É -->
<div class="mobile-bottom-nav" id="mobileBottomNav">
  <div class="mobile-nav-item active" onclick="showPage('trade')">
    <img src="https://img.icons8.com/ios-filled/24/ffffff/home.png" alt="–¢–æ—Ä–≥–æ–≤–ª—è" />
    <div>–¢–æ—Ä–≥–æ–≤–ª—è</div>
  </div>
  <div class="mobile-nav-item" onclick="showPage('profile')">
    <img src="https://img.icons8.com/ios-filled/24/ffffff/user-male-circle.png" alt="–ü—Ä–æ—Ñ–∏–ª—å" />
    <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
  </div>
  <div class="mobile-nav-item" onclick="showPage('deposit')">
    <img src="https://img.icons8.com/ios-filled/24/ffffff/money-transfer.png" alt="–î–µ–ø–æ–∑–∏—Ç" />
    <div>–î–µ–ø–æ–∑–∏—Ç</div>
  </div>
  <div class="mobile-nav-item" onclick="showPage('withdraw')">
    <img src="https://img.icons8.com/ios-filled/24/ffffff/export.png" alt="–í—ã–≤–æ–¥" />
    <div>–í—ã–≤–æ–¥</div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –í—ã–≤–æ–¥–∞ -->
<div class="modal-overlay" id="vipModal">
  <div class="modal">
    <div class="modal-header">
      <h3>–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω</h3>
      <button class="modal-close" onclick="closeVipModal()">√ó</button>
    </div>
    <div class="modal-body">
      <div class="modal-message">
        <p>–í—ã–≤–æ–¥ –Ω–∞ –±–∞–Ω–∫–æ–≤—Å–∫—É—é –∫–∞—Ä—Ç—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è VIP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>
        <p>–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è VIP-—Å—Ç–∞—Ç—É—Å–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏.</p>
      </div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn modal-btn-cancel" onclick="closeVipModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
      <button class="modal-btn modal-btn-confirm" onclick="closeVipModal()">–ü–æ–Ω—è—Ç–Ω–æ</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="commissionModal">
  <div class="modal">
    <div class="modal-header">
      <h3>–í–Ω–∏–º–∞–Ω–∏–µ: –í—ã—Å–æ–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏</h3>
      <button class="modal-close" onclick="closeCommissionModal()">√ó</button>
    </div>
    <div class="modal-body">
      <div class="modal-message">
        <p>–ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –í–∞—Å –æ –∫–æ–º–∏—Å—Å–∏—è—Ö –ø—Ä–∏ –≤—ã–≤–æ–¥–µ —Å—Ä–µ–¥—Å—Ç–≤.</p>
        
        <div class="commission-warning">
          <p><strong>–ö–æ–º–∏—Å—Å–∏—è –∑–∞ –≤—ã–≤–æ–¥: 40%</strong></p>
          <p>–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:</p>
          <ul class="commission-list">
            <li>‚Ä¢ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã KYC-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏;</li>
            <li>‚Ä¢ –î–µ–π—Å—Ç–≤–∏–µ–º —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ (–ø—Ä–∏ –¥–µ–ø–æ–∑–∏—Ç–µ –º–µ–Ω–µ–µ 1 000 USDT).</li>
          </ul>
        </div>

        <p><strong>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</strong> –ë–∏—Ä–∂–∞-–ø–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–µ—Ä–∂–∞—Ç—å –¥–æ 40% –æ—Ç —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Å–≤–æ–∏–º —Ç–∞—Ä–∏—Ñ–∞–º.</p>
        
        <p class="commission-total">–û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –∫–æ–º–∏—Å—Å–∏—é —Å–æ—Å—Ç–∞–≤—è—Ç –æ—Ç 40% –¥–æ 80% –æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–π —Å—É–º–º—ã.</p>
      </div>

      <div class="checkbox-container">
        <input type="checkbox" id="agreeCheckbox" onchange="toggleContinueButton()">
        <label for="agreeCheckbox" class="checkbox-label">
          –Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å —Ç–µ–º —á—Ç–æ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –∫–æ–º–∏—Å—Å–∏—é —Å–æ—Å—Ç–∞–≤—è—Ç –æ—Ç 40% –¥–æ 80% –æ—Ç —Å—É–º–º—ã –≤—ã–≤–æ–¥–∞
        </label>
      </div>

      <div id="supportMessage" class="support-message" style="display: none;">
        <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏</p>
        <button class="modal-btn modal-btn-confirm" onclick="closeCommissionModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn modal-btn-cancel" onclick="closeCommissionModal()">–û—Ç–º–µ–Ω–∞</button>
      <button class="modal-btn modal-btn-confirm" id="continueBtn" onclick="showSupportMessage()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- –ù–û–í–û–ï –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –¢–ò–ü–ê REQUEST -->
<div class="modal-overlay" id="requestModal">
  <div class="modal">
    <div class="modal-header">
      <h3>–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3>
      <button class="modal-close" onclick="closeRequestModal()">√ó</button>
    </div>
    <div class="modal-body">
      <div class="success-checkmark">
        <div class="check-icon">
          <span class="icon-line line-tip"></span>
          <span class="icon-line line-long"></span>
          <div class="icon-circle"></div>
          <div class="icon-fix"></div>
        </div>
      </div>
      
      <div class="modal-message" style="text-align: center;">
        <p style="font-size: 20px; font-weight: bold; color: #16c784; margin-bottom: 20px;">‚úì –ó–∞–ø—Ä–æ—Å –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ</p>
        <p>–î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã–≤–æ–¥–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</p>
      </div>

      <div class="request-buttons">
        <a href="https://www.galardro.org/sapport" target="_blank" class="support-link-btn">
          –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
        </a>
        <button class="cancel-withdraw-btn" onclick="closeRequestModal()">
          –û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–≤–æ–¥
        </button>
      </div>
    </div>
  </div>
</div>

<!-- –ù–û–í–û–ï –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –¢–ò–ü–ê NORMAL -->
<div class="modal-overlay" id="normalModal">
  <div class="modal">
    <div class="modal-header">
      <h3>–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3>
      <button class="modal-close" onclick="closeNormalModal()">√ó</button>
    </div>
    <div class="modal-body">
      <div class="success-checkmark">
        <div class="check-icon">
          <span class="icon-line line-tip"></span>
          <span class="icon-line line-long"></span>
          <div class="icon-circle"></div>
          <div class="icon-fix"></div>
        </div>
      </div>
      
      <div class="modal-message" style="text-align: center;">
        <p style="font-size: 20px; font-weight: bold; color: #16c784; margin-bottom: 20px;">‚úì –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ –ø—Ä–∏–Ω—è—Ç</p>
        <p>–°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –∑–∞—á–∏—Å–ª–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤</p>
      </div>

      <div class="normal-withdraw-info">
        <p><strong>–î–µ—Ç–∞–ª–∏ –≤—ã–≤–æ–¥–∞:</strong></p>
        <div class="withdraw-details">
          <div class="detail-row">
            <span>–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞:</span>
            <span id="withdrawAmount">100.00 USDT</span>
          </div>
          <div class="detail-row">
            <span>–ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ç–∏:</span>
            <span class="fee-amount" id="networkFee">1.00 USDT</span>
          </div>
          <div class="detail-row">
            <span>–í—ã –ø–æ–ª—É—á–∏—Ç–µ:</span>
            <span class="receive-amount" id="receiveAmount">99.00 USDT</span>
          </div>
          <div class="detail-row">
            <span>–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞:</span>
            <span id="walletAddressDisplay">0x742d35Cc6634C0532925a3b8D...</span>
          </div>
        </div>
      </div>

      <div class="countdown-timer" id="countdownTimer">
        –û–±—Ä–∞–±–æ—Ç–∫–∞: <span id="timerValue">24:00:00</span>
      </div>

      <div class="request-buttons">
        <button class="support-link-btn" onclick="closeNormalModal()">
          –ó–∞–∫—Ä—ã—Ç—å
        </button>
        <button class="cancel-withdraw-btn" onclick="cancelNormalWithdraw()">
          –û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–≤–æ–¥
        </button>
      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast">–û—à–∏–±–∫–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</div>

<script>
// =============================================
// REAL-TIME –û–ë–ù–û–í–õ–ï–ù–ò–ï –ë–ê–õ–ê–ù–°–û–í –° GITHUB
// =============================================

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è GitHub API (–ó–ê–ú–ï–ù–ò –ù–ê –°–í–û–ò!)
const GITHUB_CONFIG = {
    owner: 'reduk000002-afk', // ‚Üê –¢–í–û–ô –õ–û–ì–ò–ù
    repo: 'terminal1', // ‚Üê –¢–í–û–ô –†–ï–ü–û–ó–ò–¢–û–†–ò–ô
    path: 'users.json'
};

// –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ GitHub)
let usersData = {};
let currentUser = null;
let countdownInterval = null;
let autoRefreshInterval = null;

// –†–µ–∑–µ—Ä–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ GitHub –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
const FALLBACK_DATA = {
    "reduk1": { 
        "password": "12345", 
        "balance": "256.17",
        "level": "VIP 1",
        "withdrawType": "normal",
        "email": "reduk1@galardro.org",
        "created": "2024-01-01T00:00:00Z"
    },
    "dimapetrochenko156@gmail.com": { 
        "password": "WX1284TR", 
        "balance": "904.25",
        "level": "–°—Ç–∞–Ω–¥–∞—Ä—Ç",
        "withdrawType": "request",
        "email": "dimapetrochenko156@gmail.com",
        "created": "2024-01-01T00:00:00Z"
    },
    "e_son@internet.ru": { 
        "password": "Yk-8357009729", 
        "balance": "286.08",
        "level": "–°—Ç–∞–Ω–¥–∞—Ä—Ç",
        "withdrawType": "request",
        "email": "e_son@internet.ru",
        "created": "2024-01-01T00:00:00Z"
    }
};

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ GitHub
async function loadUsersData() {
    try {
        console.log('üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ GitHub...');
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º raw.githubusercontent.com –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
        const response = await fetch(
            `https://raw.githubusercontent.com/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/main/${GITHUB_CONFIG.path}?t=${Date.now()}`,
            {
                cache: 'no-store', // –æ—Ç–∫–ª—é—á–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
                headers: {
                    'Accept': 'application/json'
                }
            }
        );
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        usersData = await response.json();
        console.log('‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ GitHub');
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
        if (currentUser && usersData[currentUser]) {
            updateAllBalances();
            updateUserData();
        }
        
        showUpdateNotification('‚úÖ –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—ë–Ω');
        
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        console.log('üîÑ –ò—Å–ø–æ–ª—å–∑—É—é —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ...');
        usersData = FALLBACK_DATA;
        
        if (currentUser && usersData[currentUser]) {
            updateAllBalances();
            updateUserData();
        }
        
        showUpdateNotification('‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
async function forceRefreshData() {
    await loadUsersData();
}

// –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
function startAutoRefresh() {
    console.log('üîÑ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥)');
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ä–∞–∑—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    loadUsersData();
    
    // –ó–∞—Ç–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    if (autoRefreshInterval) {
        clearInterval(autoRefreshInterval);
    }
    
    autoRefreshInterval = setInterval(async () => {
        try {
            await loadUsersData();
        } catch (error) {
            console.log('–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:', error.message);
        }
    }, 10000); // 10 —Å–µ–∫—É–Ω–¥
}

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
function showUpdateNotification(message) {
    // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #16c784;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        z-index: 9999;
        animation: fadeInOut 2s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        gap: 10px;
        max-width: 300px;
        word-break: break-word;
    `;
    notification.innerHTML = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'fadeOut 0.5s ease';
        setTimeout(() => notification.remove(), 500);
    }, 1500);
}

// –°—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const notificationStyles = document.createElement('style');
notificationStyles.textContent = `
    @keyframes fadeInOut {
        0% { opacity: 0; transform: translateY(20px) translateX(20px); }
        10% { opacity: 1; transform: translateY(0) translateX(0); }
        90% { opacity: 1; transform: translateY(0) translateX(0); }
        100% { opacity: 0; transform: translateY(20px) translateX(20px); }
    }
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
`;
document.head.appendChild(notificationStyles);

// =============================================
// –°–ò–°–¢–ï–ú–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø
// =============================================

const SYSTEM_CONFIG = {
    ADMIN_SECRET: 'galardro_admin_2024',
    UPDATE_INTERVAL: 300,
    FEES: {
        normal: 1,
        commission: 40
    }
};

// –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
window.addEventListener('DOMContentLoaded', async function() {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ GitHub
    await loadUsersData();
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const savedUser = localStorage.getItem('currentUser');
    
    if (isLoggedIn && savedUser && usersData[savedUser]) {
        currentUser = savedUser;
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        updateUserData();
        updateAllBalances();
        initWatchlist();
        updateCurrentTime();
        initCompanyList();
    } else {
        document.getElementById('loginContainer').style.display = 'flex';
        document.getElementById('mainContent').style.display = 'none';
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    startAutoRefresh();
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    document.getElementById('refreshBalanceBtn').addEventListener('click', forceRefreshData);
});

// =============================================
// –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê
// =============================================

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—é
function toggleMenu() {
  const dropdownMenu = document.getElementById('dropdownMenu');
  dropdownMenu.classList.toggle('active');
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
document.addEventListener('click', function(event) {
  const dropdownMenu = document.getElementById('dropdownMenu');
  const menuToggle = document.querySelector('.menu-toggle');
  
  if (!dropdownMenu.contains(event.target) && !menuToggle.contains(event.target)) {
    dropdownMenu.classList.remove('active');
  }
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–π
function togglePositions() {
  const positionsContainer = document.getElementById('positionsContainer');
  const positionsTitle = document.querySelector('.positions-title');
  const tradeTerminal = document.getElementById('tradeTerminal');
  
  positionsContainer.classList.toggle('expanded');
  positionsTitle.classList.toggle('expanded');
  
  // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Å–¥–≤–∏–≥–∞–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª –≤–Ω–∏–∑
  if (window.innerWidth <= 767) {
    tradeTerminal.classList.toggle('shifted');
  }
}

// –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
function showPage(page) {
  document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
  document.querySelectorAll('.mobile-nav-item').forEach(item => item.classList.remove('active'));
  
  document.getElementById(`${page}-page`).classList.add('active');
  
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
  document.getElementById('dropdownMenu').classList.remove('active');
  
  // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  if (window.innerWidth > 767) {
    // –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
    if (event && event.currentTarget) {
      event.currentTarget.classList.add('active');
    }
  } else {
    // –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
    const mobileItems = document.querySelectorAll('.mobile-nav-item');
    const pages = ['trade', 'profile', 'deposit', 'withdraw'];
    mobileItems.forEach((item, index) => {
      if (pages[index] === page) {
        item.classList.add('active');
      }
    });
  }
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å—ã –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
  if (currentUser) {
    updateAllBalances();
  }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –±–∞–ª–∞–Ω—Å–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
function updateAllBalances() {
    if (!currentUser || !usersData[currentUser]) return;
    
    const user = usersData[currentUser];
    const balance = parseFloat(user.balance || 0).toFixed(2);
    
    // –•–µ–¥–µ—Ä
    document.getElementById('balanceValue').textContent = balance + ' USDT';
    
    // –¢–æ—Ä–≥–æ–≤–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    const availableElement = document.getElementById('availableBalanceTrade');
    if (availableElement) availableElement.textContent = balance;
    
    // –î–µ–ø–æ–∑–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    const depositTotal = document.getElementById('depositTotalBalance');
    const availableBalance = document.getElementById('availableBalance');
    if (depositTotal) depositTotal.innerHTML = balance + '<span class="balance-currency">USDT</span>';
    if (availableBalance) availableBalance.textContent = balance + ' USDT';
    
    // –í—ã–≤–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    const withdrawTotal = document.getElementById('withdrawTotalBalance');
    const withdrawTotalBalance = document.getElementById('withdrawBalanceTotal');
    const withdrawAvailable = document.getElementById('withdrawBalanceAvailable');
    
    if (withdrawTotal) withdrawTotal.innerHTML = balance + '<span class="balance-currency">USDT</span>';
    if (withdrawTotalBalance) withdrawTotalBalance.textContent = balance + ' USDT';
    if (withdrawAvailable) withdrawAvailable.textContent = balance + ' USDT';
    
    // –î—Ä—É–≥–∏–µ –º–µ—Å—Ç–∞ –≥–¥–µ –º–æ–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –±–∞–ª–∞–Ω—Å
    const balanceElements = document.querySelectorAll('.info-line:nth-child(2)');
    balanceElements.forEach(el => {
        if (el.textContent.includes('–î–æ—Å—Ç.:')) {
            el.textContent = `–î–æ—Å—Ç.: ${balance} USDT`;
        }
    });
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function updateUserData() {
    if (!currentUser || !usersData[currentUser]) return;
    
    const user = usersData[currentUser];
    const levelElement = document.getElementById('userLevel');
    const emailElement = document.getElementById('userEmail');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
    if (levelElement) {
        levelElement.textContent = `–£—Ä–æ–≤–µ–Ω—å: ${user.level}`;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—á—Ç—É
    if (emailElement) {
        emailElement.textContent = user.email || currentUser;
    }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞
function checkLogin() {
    const login = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    const errorElement = document.getElementById('loginError');
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –Ω–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
    if (usersData[login] && usersData[login].password === password) {
        currentUser = login;
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('currentUser', login);
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        updateUserData();
        updateAllBalances();
        initWatchlist();
        updateCurrentTime();
        initCompanyList();
        errorElement.style.display = 'none';
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –≤—Ö–æ–¥–µ
        showUpdateNotification('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω');
    } else {
        errorElement.style.display = 'block';
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Ö–µ–¥–µ—Ä–µ
function updateBalanceInfo() {
    if (!currentUser || !usersData[currentUser]) return;
    
    const balanceElement = document.getElementById('balanceValue');
    const pnlElement = document.getElementById('pnlValue');
    
    const pnlChange = (Math.random() * 2 - 1).toFixed(2);
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    balanceElement.textContent = usersData[currentUser].balance + ' USDT';
    pnlElement.textContent = (pnlChange >= 0 ? '+' : '') + pnlChange + '%';
    pnlElement.className = pnlChange >= 0 ? 'balance-value positive' : 'balance-value negative';
    
    setTimeout(updateBalanceInfo, 5000);
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
function updateCurrentTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit', second: '2-digit'});
    const dateString = now.toLocaleDateString('ru-RU');
    
    const currentTimeElement = document.getElementById('currentTime');
    if (currentTimeElement) {
        currentTimeElement.textContent = `${timeString} ${dateString} | ${timeString} ‚Äì ${timeString} (+0.01%)`;
    }
    
    setTimeout(updateCurrentTime, 1000);
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
window.addEventListener('DOMContentLoaded', function() {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const savedUser = localStorage.getItem('currentUser');
    
    if (isLoggedIn && savedUser && usersData[savedUser]) {
        currentUser = savedUser;
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        updateUserData();
        updateAllBalances();
        initWatchlist();
        updateCurrentTime();
        initCompanyList();
    } else {
        document.getElementById('loginContainer').style.display = 'flex';
        document.getElementById('mainContent').style.display = 'none';
    }
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ localStorage
let storageAvailable = true;
try {
    const testKey = '__test';
    localStorage.setItem(testKey, '1');
    localStorage.removeItem(testKey);
} catch (e) {
    storageAvailable = false;
    console.warn("‚ö†Ô∏è LocalStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω");
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
function initWatchlist() {
    const watchlist = [
        { symbol: 'BTC/USDT', price: 89962.22, change: 2.99 },
        { symbol: 'ETH/USDT', price: 9917.45, change: 1.15 },
        { symbol: 'AAPL', price: 790.12, change: 0.97 },
        { symbol: 'TSLA', price: 802.39, change: 3.86 },
        { symbol: 'NVDA', price: 4929.91, change: 1.00 },
        { symbol: 'MSFT', price: 739.59, change: 1.31 }
    ];
    
    const watchlistContainer = document.getElementById('watchlist');
    if (!watchlistContainer) return;
    
    watchlistContainer.innerHTML = '';
    
    watchlist.forEach(asset => {
        const item = document.createElement('div');
        item.className = 'watchlist-item';
        item.onclick = () => selectAsset(asset.symbol.split('/')[0]);
        
        const changeClass = asset.change >= 0 ? 'positive' : 'negative';
        const changeSign = asset.change >= 0 ? '+' : '';
        
        item.innerHTML = `
            <div class="asset-name">${asset.symbol}</div>
            <div class="asset-price">${asset.price.toLocaleString()}</div>
            <div class="asset-change ${changeClass}">${changeSign}${asset.change}%</div>
        `;
        
        watchlistContainer.appendChild(item);
    });
    
    updateWatchlistPrices();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –≤ —Å–ø–∏—Å–∫–µ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
function updateWatchlistPrices() {
    const items = document.querySelectorAll('.watchlist-item');
    
    items.forEach(item => {
        const priceElement = item.querySelector('.asset-price');
        const changeElement = item.querySelector('.asset-change');
        
        if (priceElement && changeElement) {
            const currentPrice = parseFloat(priceElement.textContent.replace(/,/g, ''));
            const currentChange = parseFloat(changeElement.textContent);
            
            const priceChange = (Math.random() * 10 - 5) / 100;
            const newPrice = currentPrice * (1 + priceChange / 100);
            const newChange = currentChange + priceChange;
            
            priceElement.textContent = newPrice.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            changeElement.textContent = (newChange >= 0 ? '+' : '') + newChange.toFixed(2) + '%';
            changeElement.className = `asset-change ${newChange >= 0 ? 'positive' : 'negative'}`;
        }
    });
    
    updateMarketData();
    setTimeout(updateWatchlistPrices, 3000);
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
function updateMarketData() {
    const priceElement = document.getElementById('currentPrice');
    const volumeElement = document.getElementById('dailyVolume');
    const changeElement = document.getElementById('dailyChange');
    
    if (priceElement) {
        const currentPrice = parseFloat(priceElement.textContent.split(' ')[0]) || 100;
        const newPrice = (currentPrice + (Math.random() * 0.5 - 0.25)).toFixed(2);
        priceElement.textContent = `${newPrice} USD`;
        priceElement.style.color = newPrice > currentPrice ? '#16c784' : '#ea3943';
        setTimeout(() => priceElement.style.color = '#c9d1d9', 500);
    }
    
    if (volumeElement) {
        const currentVolume = parseFloat(volumeElement.textContent) || 1000;
        const newVolume = (currentVolume + (Math.random() * 100 - 50)).toFixed(0);
        volumeElement.textContent = `${Math.abs(newVolume)} BTC`;
    }
    
    if (changeElement) {
        const currentChange = parseFloat(changeElement.textContent) || 0;
        const newChange = (currentChange + (Math.random() * 0.5 - 0.25)).toFixed(2);
        changeElement.textContent = `${newChange}%`;
        changeElement.style.color = newChange >= 0 ? '#16c784' : '#ea3943';
    }
    
    const btcDominance = document.getElementById('btcDominance');
    const fearGreed = document.getElementById('fearGreed');
    const totalMarketCap = document.getElementById('totalMarketCap');
    const volume24h = document.getElementById('volume24h');
    
    if (btcDominance) {
        const currentBtcDom = parseFloat(btcDominance.textContent) || 42.8;
        const newBtcDom = (currentBtcDom + (Math.random() * 0.2 - 0.1)).toFixed(1);
        btcDominance.textContent = `${newBtcDom}%`;
    }
    
    if (fearGreed) {
        const currentFearGreed = parseInt(fearGreed.textContent) || 72;
        const newFearGreed = Math.max(0, Math.min(100, currentFearGreed + Math.floor(Math.random() * 5 - 2)));
        fearGreed.textContent = newFearGreed;
        fearGreed.style.color = newFearGreed > 50 ? '#16c784' : newFearGreed > 25 ? '#ffcc00' : '#ea3943';
    }
}

// –í—ã–±–æ—Ä –∞–∫—Ç–∏–≤–∞ –∏–∑ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö
function selectAsset(symbol) {
    document.getElementById("selectedCompany").textContent = symbol;
    document.getElementById("companyTitle").textContent = symbol;
    
    const overrides = {
        "BTC": "BINANCE:BTCUSDT",
        "ETH": "BINANCE:ETHUSDT",
        "AAPL": "NASDAQ:AAPL",
        "MSFT": "NASDAQ:MSFT",
        "GOOGL": "NASDAQ:GOOGL",
        "AMZN": "NASDAQ:AMZN",
        "TSLA": "NASDAQ:TSLA",
        "SHEL": "NYSE:SHEL",
        "NVDA": "NASDAQ:NVDA",
        "META": "NASDAQ:META",
        "NFLX": "NASDAQ:NFLX",
        "INTC": "NASDAQ:INTC",
        "AMD": "NASDAQ:AMD",
        "BABA": "NYSE:BABA",
        "ORCL": "NYSE:ORCL",
        "CRM": "NYSE:CRM",
        "ADBE": "NASDAQ:ADBE",
        "QCOM": "NASDAQ:QCOM",
        "UBER": "NYSE:UBER",
        "PYPL": "NASDAQ:PYPL",
        "T": "NYSE:T",
        "DIS": "NYSE:DIS",
        "KO": "NYSE:KO",
        "PEP": "NASDAQ:PEP",
        "WMT": "NYSE:WMT",
        "MCD": "NYSE:MCD",
        "XOM": "NYSE:XOM",
        "CVX": "NYSE:CVX",
        "BA": "NYSE:BA"
    };
    
    const tvSymbol = overrides[symbol] || `NASDAQ:${symbol}`;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º iframe —Å –≥—Ä–∞—Ñ–∏–∫–æ–º
    const chartFrame = document.getElementById("chartFrame");
    if (chartFrame) {
        chartFrame.src = `https://www.tradingview.com/widgetembed/?symbol=${tvSymbol}&interval=1&theme=dark`;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    updateMarketData();
    
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é
    document.getElementById("dropdown").style.display = "none";
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
function updateChartData() {
    const selectedCompany = document.getElementById("selectedCompany").textContent;
    if (selectedCompany) {
        updateMarketData();
    }
}

setInterval(updateChartData, 2000);

function updateLeverage(val) {
    const leverageElement = document.getElementById("leverage-value");
    if (leverageElement) {
        leverageElement.textContent = val + "x";
    }
}

const companies = [
    "AAPL", "MSFT", "GOOGL", "AMZN", "TSLA", "SHEL", "NVDA", "META",
    "NFLX", "INTC", "AMD", "BABA", "ORCL", "CRM", "ADBE", "QCOM", "UBER",
    "PYPL", "T", "DIS", "KO", "PEP", "WMT", "MCD", "XOM", "CVX", "BA"
];

function initCompanyList() {
    const companyList = document.getElementById('companyList');
    if (!companyList) return;
    
    companyList.innerHTML = '';
    
    companies.forEach(company => {
        const div = document.createElement('div');
        div.textContent = company;
        div.onclick = () => selectAsset(company);
        companyList.appendChild(div);
    });
}

function toggleDropdown() {
    const dropdown = document.getElementById("dropdown");
    if (dropdown) {
        dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        if (dropdown.style.display === "block") {
            filterCompanies("");
            document.getElementById("dropdown").querySelector("input").focus();
        }
    }
}

function filterCompanies(search = "") {
    const filtered = companies.filter(c => c.toLowerCase().includes(search.toLowerCase()));
    const companyList = document.getElementById("companyList");
    if (!companyList) return;
    
    companyList.innerHTML = "";
    filtered.forEach(company => {
        const div = document.createElement("div");
        div.textContent = company;
        div.onclick = () => selectAsset(company);
        companyList.appendChild(div);
    });
}

document.addEventListener("click", function(e) {
    if (!e.target.closest(".selector-container")) {
        const dropdown = document.getElementById("dropdown");
        if (dropdown) {
            dropdown.style.display = "none";
        }
    }
});

function openPosition(type) {
    if (!currentUser) return;
    
    const savedDeals = storageAvailable ? JSON.parse(localStorage.getItem("deals") || "[]") : [];
    const companyElement = document.getElementById("selectedCompany");
    const leverageElement = document.getElementById("leverage");
    const amountInput = document.querySelector('input[type="number"]');
    
    const company = companyElement ? companyElement.textContent : "AAPL";
    const leverage = leverageElement ? leverageElement.value : "20";
    const amount = amountInput ? amountInput.value || 0 : 0;

    const dealBlock = document.createElement("div");
    dealBlock.className = "deal-block";

    const directionColor = type === "–õ–æ–Ω–≥" ? "#16c784" : "#ea3943";

    dealBlock.innerHTML = `
        <div><strong>${company}USDT</strong> <span style="color:${directionColor}">${type}</span> <span>–ö—Ä–æ—Å—Å</span> <span>${leverage}x</span></div>
        <div class="deal-row">
            <div class="deal-column">
                <div>–°—Ä. —Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è: <span>${(Math.random() * 5 + 1).toFixed(4)}</span> USDT</div>
            </div>
            <div class="deal-column">
                <div>–í—Å–µ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ: <span>${parseFloat(amount).toFixed(2)}</span> USDT</div>
            </div>
            <div class="deal-column">
                <div>–ü/–£ –ø–æ–∑–∏—Ü–∏–∏: <span class="profit">‚Äî</span> USDT</div>
                <div>–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ü/–£: <span class="realized">‚Äî</span> USDT</div>
            </div>
        </div>
    `;

    // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    const mobileContainer = document.getElementById("positionsContainer");
    const desktopContainer = document.getElementById("desktopPositionsContainer");
    
    if (mobileContainer) {
        const mobileDealBlock = dealBlock.cloneNode(true);
        mobileContainer.prepend(mobileDealBlock);
        while (mobileContainer.children.length > 5) {
            mobileContainer.removeChild(mobileContainer.lastChild);
        }
    }
    
    if (desktopContainer) {
        const desktopDealBlock = dealBlock.cloneNode(true);
        desktopContainer.prepend(desktopDealBlock);
        while (desktopContainer.children.length > 5) {
            desktopContainer.removeChild(desktopContainer.lastChild);
        }
    }

    const timestamp = Date.now();
    const timeOpened = new Date().toLocaleTimeString();

    const dealData = {
        company,
        leverage,
        type,
        amount: parseFloat(amount).toFixed(2),
        openPrice: (Math.random() * 5 + 1).toFixed(4),
        timeOpened,
        timestamp
    };
    
    savedDeals.unshift(dealData);
    if (storageAvailable) {
        const trimmedDeals = savedDeals.slice(0, 5);
        localStorage.setItem("deals", JSON.stringify(trimmedDeals));
    }

    const timeInfo = `–í—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è: ${timeOpened}`;

    const infoColumn = document.createElement('div');
    infoColumn.className = 'deal-column';
    infoColumn.innerHTML = `<div>${timeInfo}</div>`;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –±–ª–æ–∫–∞–º
    const containers = [mobileContainer, desktopContainer];
    containers.forEach(container => {
        if (container && container.firstChild) {
            container.firstChild.querySelector('.deal-row').appendChild(infoColumn.cloneNode(true));
        }
    });

    updateBalanceInfo();
}

function toggleTPSL(checkbox, targetId) {
    const target = document.getElementById(targetId);
    if (target) {
        target.style.display = checkbox.checked ? 'block' : 'none';
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–¥–µ–ª–æ–∫ –∏–∑ localStorage –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
window.addEventListener("load", () => {
    if (storageAvailable) {
        let savedDeals = JSON.parse(localStorage.getItem("deals") || "[]");
        savedDeals = savedDeals.slice(0, 5);
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏–∏ –≤ –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        savedDeals.forEach(deal => {
            restorePosition(deal);
        });
    }
    updateMarketData();
});

function restorePosition(deal) {
    const dealBlock = document.createElement("div");
    dealBlock.className = "deal-block";

    const directionColor = deal.type === "–õ–æ–Ω–≥" ? "#16c784" : "#ea3943";

    dealBlock.innerHTML = `
        <div><strong>${deal.company}USDT</strong> <span style="color:${directionColor}">${deal.type}</span> <span>–ö—Ä–æ—Å—Å</span> <span>${deal.leverage}x</span></div>
        <div class="deal-row">
            <div class="deal-column">
                <div>–°—Ä. —Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è: <span>${deal.openPrice}</span> USDT</div>
            </div>
            <div class="deal-column">
                <div>–í—Å–µ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ: <span>${deal.amount}</span> USDT</div>
            </div>
            <div class="deal-column">
                <div>–ü/–£ –ø–æ–∑–∏—Ü–∏–∏: <span class="profit">‚Äî</span> USDT</div>
                <div>–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ü/–£: <span class="realized">‚Äî</span> USDT</div>
            </div>
        </div>
    `;

    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    const mobileContainer = document.getElementById("positionsContainer");
    const desktopContainer = document.getElementById("desktopPositionsContainer");
    
    if (mobileContainer) {
        const mobileDealBlock = dealBlock.cloneNode(true);
        mobileContainer.prepend(mobileDealBlock);
    }

    if (desktopContainer) {
        const desktopDealBlock = dealBlock.cloneNode(true);
        desktopContainer.prepend(desktopDealBlock);
    }

    const timeInfo = `–í—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è: ${deal.timeOpened}`;

    const infoColumn = document.createElement('div');
    infoColumn.className = 'deal-column';
    infoColumn.innerHTML = `<div>${timeInfo}</div>`;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –±–ª–æ–∫–∞–º
    const containers = [mobileContainer, desktopContainer];
    containers.forEach(container => {
        if (container && container.firstChild) {
            container.firstChild.querySelector('.deal-row').appendChild(infoColumn.cloneNode(true));
        }
    });
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ü—Ä–æ—Ñ–∏–ª—å
function showKycMessage() {
    alert("–í —Å–≤—è–∑–∏ —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–π—Ç–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ 48 –¥–Ω–µ–π –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏\n\n–î–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–∞–º –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∏—Ä–∂–∏\n\n–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç—ã –Ω–∞ —Å–∞–π—Ç–µ, –Ω–æ –±—É–¥—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –≤–∞–º –Ω–∞ –ø–æ—á—Ç—É\n\n–ü—Ä–∏—è—Ç–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏");
}

function changePassword() {
    alert("–§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –î–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏.");
}

function enable2FA() {
    alert("–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏.");
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –î–µ–ø–æ–∑–∏—Ç
document.addEventListener('DOMContentLoaded', function() {
    const walletTabs = document.querySelectorAll('.wallet-tab');
    walletTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            walletTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            document.querySelectorAll('.wallet-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const walletId = this.getAttribute('data-wallet');
            const walletContent = document.getElementById(`${walletId}-wallet`);
            if (walletContent) {
                walletContent.classList.add('active');
            }
        });
    });

    document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const container = this.closest('.qr-code-container');
            if (!container) return;
            
            const addressElement = container.querySelector('.wallet-address');
            if (!addressElement) return;
            
            const address = addressElement.textContent;
            navigator.clipboard.writeText(address)
                .then(() => {
                    const originalText = this.textContent;
                    this.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
                    this.classList.add('copied');
                    
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.classList.remove('copied');
                    }, 2000);
                })
                .catch(err => {
                    console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
                    // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                    const textArea = document.createElement('textarea');
                    textArea.value = address;
                    document.body.appendChild(textArea);
                    textArea.select();
                    try {
                        document.execCommand('copy');
                        const originalText = this.textContent;
                        this.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
                        this.classList.add('copied');
                        
                        setTimeout(() => {
                            this.textContent = originalText;
                            this.classList.remove('copied');
                        }, 2000);
                    } catch (fallbackErr) {
                        alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.');
                    }
                    document.body.removeChild(textArea);
                });
        });
    });
});

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –í—ã–≤–æ–¥
function switchWithdrawTab(type) {
    document.querySelectorAll('.withdraw-tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.form-section').forEach(sec => sec.classList.remove('active'));

    const tab = document.querySelector(`.withdraw-tab[onclick*="${type}"]`);
    const section = document.getElementById(type);
    
    if (tab) tab.classList.add('active');
    if (section) section.classList.add('active');
}

function showVipModal() {
    document.getElementById('vipModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeVipModal() {
    document.getElementById('vipModal').classList.remove('active');
    document.body.style.overflow = 'auto';
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–≤–æ–¥–∞ —Å —É—á–µ—Ç–æ–º —Ç—Ä–µ—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function showCommissionModal() {
    if (!currentUser || !usersData[currentUser]) return;
    
    const user = usersData[currentUser];
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –≤—ã–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (user.withdrawType === "normal") {
        showNormalModal();
    } else if (user.withdrawType === "request") {
        showRequestModal();
    } else {
        showCommissionModalOld();
    }
}

// –°—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–º–∏—Å—Å–∏–∏
function showCommissionModalOld() {
    const modal = document.getElementById('commissionModal');
    if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        document.getElementById('agreeCheckbox').checked = false;
        document.getElementById('continueBtn').disabled = true;
        document.getElementById('supportMessage').style.display = 'none';
        document.querySelector('.checkbox-container').style.display = 'flex';
        document.querySelector('.modal-footer').style.display = 'flex';
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–∏–ø–∞ REQUEST
function showRequestModal() {
    const modal = document.getElementById('requestModal');
    if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–∏–ø–∞ NORMAL (–æ–±—ã—á–Ω—ã–π –≤—ã–≤–æ–¥)
function showNormalModal() {
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
    const amountInput = document.getElementById('withdraw-amount-crypto');
    const walletInput = document.getElementById('wallet-address');
    
    const amount = amountInput ? amountInput.value || '100.00' : '100.00';
    const walletAddress = walletInput ? walletInput.value || '0x742d35Cc6634C0532925a3b8D...' : '0x742d35Cc6634C0532925a3b8D...';
    
    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–º–∏—Å—Å–∏—é (1% –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞)
    const networkFee = (parseFloat(amount) * (SYSTEM_CONFIG.FEES.normal / 100)).toFixed(2);
    const receiveAmount = (parseFloat(amount) - parseFloat(networkFee)).toFixed(2);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
    document.getElementById('withdrawAmount').textContent = amount + ' USDT';
    document.getElementById('networkFee').textContent = networkFee + ' USDT';
    document.getElementById('receiveAmount').textContent = receiveAmount + ' USDT';
    document.getElementById('walletAddressDisplay').textContent = walletAddress;
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
    startCountdownTimer();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    const modal = document.getElementById('normalModal');
    if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
function startCountdownTimer() {
    let timeLeft = 24 * 60 * 60; // 24 —á–∞—Å–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    
    if (countdownInterval) {
        clearInterval(countdownInterval);
    }
    
    countdownInterval = setInterval(() => {
        timeLeft--;
        
        if (timeLeft <= 0) {
            clearInterval(countdownInterval);
            document.getElementById('timerValue').textContent = '–ó–∞–≤–µ—Ä—à–µ–Ω–æ';
            document.getElementById('timerValue').style.color = '#16c784';
            return;
        }
        
        const hours = Math.floor(timeLeft / 3600);
        const minutes = Math.floor((timeLeft % 3600) / 60);
        const seconds = timeLeft % 60;
        
        const timerElement = document.getElementById('timerValue');
        if (timerElement) {
            timerElement.textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
    }, 1000);
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã –æ–±—ã—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
function cancelNormalWithdraw() {
    if (countdownInterval) {
        clearInterval(countdownInterval);
    }
    closeNormalModal();
    showToast('–í—ã–≤–æ–¥ –æ—Ç–º–µ–Ω–µ–Ω');
}

function closeNormalModal() {
    const modal = document.getElementById('normalModal');
    if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
}

function closeRequestModal() {
    const modal = document.getElementById('requestModal');
    if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
}

function closeCommissionModal() {
    const modal = document.getElementById('commissionModal');
    if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
}

function toggleContinueButton() {
    const checkbox = document.getElementById('agreeCheckbox');
    const continueBtn = document.getElementById('continueBtn');
    if (checkbox && continueBtn) {
        continueBtn.disabled = !checkbox.checked;
    }
}

function showSupportMessage() {
    const checkboxContainer = document.querySelector('.checkbox-container');
    const modalFooter = document.querySelector('.modal-footer');
    const supportMessage = document.getElementById('supportMessage');
    
    if (checkboxContainer) checkboxContainer.style.display = 'none';
    if (modalFooter) modalFooter.style.display = 'none';
    if (supportMessage) supportMessage.style.display = 'block';
}

function showError() {
    const toast = document.getElementById("toast");
    if (toast) {
        toast.style.display = "block";
        setTimeout(() => {
            toast.style.display = "none";
        }, 4000);
    }
}

function showToast(message) {
    const toast = document.getElementById("toast");
    if (toast) {
        toast.textContent = message;
        toast.style.display = "block";
        setTimeout(() => {
            toast.style.display = "none";
        }, 4000);
    }
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–∫–Ω–∞
document.addEventListener('click', function(event) {
    const modals = ['vipModal', 'commissionModal', 'requestModal', 'normalModal'];
    
    modals.forEach(modalId => {
        const modal = document.getElementById(modalId);
        if (modal && event.target === modal) {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    });
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Escape
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closeVipModal();
        closeCommissionModal();
        closeRequestModal();
        closeNormalModal();
    }
});

// –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
const animationStyles = document.createElement('style');
animationStyles.textContent = `
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
document.head.appendChild(animationStyles);
</script>
</body>
</html>
